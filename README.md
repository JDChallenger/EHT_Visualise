# EHT_Visualise

The files in this folder can be used as a tutorial on how to visualise and analyse data from experimental hut trials. Some of the materials relate to the manuscript **Assessing the variability in experimental hut trials evaluating insecticide-treated nets against malaria** (submitted for publication). The materials in this repository can be used to:

1.  Visualise data from experimental hut trials.
2.  Perform regression analyses on data from experimental hut trials
3.  Perform power calculations for an experimental hut trial, for a given scenario

The PDF file 'EHT_tutorial.pdf' contains some notes on the analyses performed here. The R script 'script_for_tutorial.R' demonstrates how the regression analyses are carried out in R. This script also generates the visualisations of an example dataset (which you could replace with your own data). The R script 'plotting_functions' defines the functions that generate the graphs-- you can ignore this, unless you're curious, or wish to modify the outputs!

Power estimates, generated by simulating generalised linear mixed models, can be obtained using the R script 'power_calculator_user_script'. This script allows the user to specify the trial being considered, defining the number of trial arms, the lenght of the trial, etc. The functions that generate the power estimates are contained in 'power_calculator_functions.R'. **Note**: at present, the power calculator uses parallelised code, designed for Mac OS. In the near future, I will modify this, so that it will also run for Windows users.

The PDF file 'EHT_tutorial.pdf' will talk you through the necessary steps. The R script 'script_for_tutorial.R' will allow you to perform the analysis for yourself.

## Installation instructions

It is important that you install both R and Rstudio before starting the tutorial. If you have a Windows computer, R can be installed [here](https://cran.r-project.org/bin/windows/base/). For other operating systems (Mac, Linux etc.), visit this [page](https://cran.r-project.org). Double-clicking the downloaded file should start the installation process. Rstudio can be downloaded [here](https://www.rstudio.com/products/rstudio/download/), choose the free option 'Rstudio Desktop'. Again, double-clicking the downloaded file should start the installation process. There are videos on Youtube (such as [this one](https://www.youtube.com/watch?v=NZxSA80lF1I), for a Windows installation), which go through the installation process for both R and Rstudio, step-by-step.

Once you have installed R and Rstudio, click on the green button 'Code' near the top of this page, and select 'Download ZIP'. After you've extracted the files, open the R project file 'EHT_Visualise.Rproj' in Rstudio. Then open the tutorial script 'script_for_tutorial.R'. This script will allow you to load and view the data, and perform the data analysis.

There are some R packages you will need to install in order to carry out the analyses. For convenience we list them here, along with the command to install them:

    install.packages(c('lme4','devtools','MASS','RColorBrewer','cowplot','ggplot2','dplyr','reshape2'))

There is one remaining package to install. After the `devtools` package is installed, you should be able to run the following command to install the `GLMMmisc` package:

    devtools::install_github("pcdjohnson/GLMMmisc")
